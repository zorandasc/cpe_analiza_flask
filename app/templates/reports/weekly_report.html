<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='reports/report.css') }}"
    />

    <!-- FOR WEASYPRINT WeasyPrint does not understand Flask routing: url_for.
    It only understands file paths. -->
    <link rel="stylesheet" href="static/reports/report.css" />
    <style>
      @page {
        @top-center {
          content: "Sedmični izvještaj CPE opreme — Sedmica {{ week }}";
        }
      }
    </style>
  </head>

  <body>
    <section class="page cover" style="page: cover">
      <h1>SEDMIČNI IZVJEŠTAJ STANJA CPE OPREME</h1>
    </section>

    <div class="page-break"></div>

    <section class="page summary">
    <h1>Sažetak sedmice</h1>

    <table class="summary-table">
        <thead>
            <tr>
                <th>Tip</th>
                <th>Prošla sedmica</th>
                <th>Ova sedmica</th>
                <th>Promjena</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>CPE ukupno</td>
                <td>{{ summary.cpe.total.previous }}</td>
                <td>{{ summary.cpe.total.current }}</td>
                <td class="{{ 'pos' if summary.cpe.total.delta > 0 else 'neg' }}">
                    {{ summary.cpe.total.delta }}
                </td>
            </tr>

            <tr>
                <td>CPE Raspoloživa oprema</td>
                <td>{{ summary.cpe.warehouse.previous }}</td>
                <td>{{ summary.cpe.warehouse.current }}</td>
                <td class="{{ 'pos' if summary.cpe.warehouse.delta > 0 else 'neg' }}">
                    {{ summary.cpe.warehouse.delta }}
                </td>
            </tr>

            <tr>
                <td>Demontirana CPE ukupno</td>
                <td>{{ summary.dismantle.previous }}</td>
                <td>{{ summary.dismantle.current }}</td>
                <td class="{{ 'pos' if summary.dismantle.delta > 0 else 'neg' }}">{{ summary.dismantle.delta }}</td>
            </tr>

            <tr>
                <td>STB IPTV ukupno</td>
                <td>{{ summary.stb.previous }}</td>
                <td>{{ summary.stb.current }}</td>
                <td class="{{ 'pos' if summary.stb.delta > 0 else 'neg' }}">{{ summary.stb.delta }}</td>
            </tr>

            <tr>
                <td>IPTV korisnici ukupno</td>
                <td>{{ summary.iptv.previous }}</td>
                <td>{{ summary.iptv.current }}</td>
                <td class="{{ 'pos' if summary.iptv.delta > 0 else 'neg' }}">{{ summary.iptv.delta }}</td>
            </tr>

            <tr>
                <td>ONT oprema ukupno</td>
                <td>{{ summary.ont.previous }}</td>
                <td>{{ summary.ont.current }}</td>
                <td class="{{ 'pos' if summary.ont.delta > 0 else 'neg' }}">{{ summary.ont.delta }}</td>
            </tr>
        </tbody>
    </table>
</section>

    <div class="page-break"></div>

    <section class="page charts">
      <h1>Trendovi u inventoriju</h1>
      <img src="{{ cpe_chart_image }}" alt="CPE Trend Chart" />
      <img
        src="{{ cpe_dismantle_chart_image }}"
        alt="CPE Dismantle Trend Chart"
      />
      <img src="{{ stb_chart_image }}" alt="STB Trend Chart" />
      <img src="{{ iptv_chart_image }}" alt="IPTV Trend Chart" />
      <img src="{{ ont_chart_image }}" alt="ONT Trend Chart" />
    </section>
  </body>
</html>
